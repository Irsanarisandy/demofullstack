(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{jkDv:function(t,e,n){"use strict";n.r(e),n.d(e,"AdminModule",(function(){return j}));var o=n("tyNb"),a=n("fXoL"),c=n("8T1h"),r=n("XiUz"),i=n("Wp6s"),s=n("wZkO"),p=n("AytR"),m=n("tk/3");let l=(()=>{class t{constructor(t){this.http=t,this.baseURL=p.a.apiUrl}getUsersWithRoles(){return this.http.get(this.baseURL+"/admin/users-with-roles")}updateUserRoles(t,e){return this.http.post(`${this.baseURL}/admin/edit-roles/${t}?roles=${e}`,{})}getPhotosForApproval(){return this.http.get(this.baseURL+"/admin/photos-to-moderate")}approvePhoto(t){return this.http.post(`${this.baseURL}/admin/approve-photo/${t}`,{})}rejectPhoto(t){return this.http.post(`${this.baseURL}/admin/reject-photo/${t}`,{})}}return t.\u0275fac=function(e){return new(e||t)(a.Yb(m.b))},t.\u0275prov=a.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=n("ofXK"),u=n("bTqV"),h=n("Qu3c"),d=n("NFeN");function g(t,e){if(1&t){const t=a.Vb();a.Ub(0,"div",2),a.Ub(1,"h2"),a.Hc(2),a.hc(3,"titlecase"),a.Tb(),a.Pb(4,"img",3),a.Ub(5,"div",4),a.Ub(6,"button",5),a.cc("click",(function(){a.xc(t);const n=e.$implicit;return a.gc().approvePhoto(n.id)})),a.Ub(7,"mat-icon"),a.Hc(8,"check"),a.Tb(),a.Tb(),a.Ub(9,"button",6),a.cc("click",(function(){a.xc(t);const n=e.$implicit;return a.gc().rejectPhoto(n.id)})),a.Ub(10,"mat-icon"),a.Hc(11,"close"),a.Tb(),a.Tb(),a.Tb(),a.Tb()}if(2&t){const t=e.$implicit,n=e.index;a.Bb(2),a.Ic(a.ic(3,3,t.username)),a.Bb(2),a.mc("src",t.url,a.zc)("alt",n+"-"+t.username)}}let f=(()=>{class t{constructor(t){this.adminService=t}ngOnInit(){this.getPhotosForApproval()}getPhotosForApproval(){this.adminService.getPhotosForApproval().subscribe(t=>this.photosForApproval=t)}approvePhoto(t){this.adminService.approvePhoto(t).subscribe(()=>{this.photosForApproval=this.photosForApproval.filter(e=>e.id!==t)})}rejectPhoto(t){this.adminService.rejectPhoto(t).subscribe(()=>{this.photosForApproval=this.photosForApproval.filter(e=>e.id!==t)})}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(l))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-photo-management"]],decls:2,vars:1,consts:[["fxLayout","row wrap","fxLayoutGap","16px",1,"photo-management"],["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","10px",4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","10px"],[3,"src","alt"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","5px"],["mat-icon-button","","matTooltip","Approve Photo",3,"click"],["mat-icon-button","","matTooltip","Reject Photo",3,"click"]],template:function(t,e){1&t&&(a.Ub(0,"div",0),a.Gc(1,g,12,5,"div",1),a.Tb()),2&t&&(a.Bb(1),a.mc("ngForOf",e.photosForApproval))},directives:[r.c,r.d,b.m,r.b,u.a,h.a,d.a],pipes:[b.v],styles:[".photo-management[_ngcontent-%COMP%]{margin-top:16px}.photo-management[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .photo-management[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .photo-management[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .photo-management[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .photo-management[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .photo-management[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%], .photo-management[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.photo-management[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:2px solid #d3d3d3;border-radius:10px;margin-bottom:10px;padding:5px;max-width:150px}"]}),t})();var P=n("Dh3D"),v=n("+0xr"),C=n("GkZk"),O=n("0IaG");function U(t,e){1&t&&(a.Ub(0,"mat-header-cell",9),a.Hc(1,"Username"),a.Tb())}function M(t,e){if(1&t&&(a.Ub(0,"mat-cell"),a.Hc(1),a.Tb()),2&t){const t=e.$implicit;a.Bb(1),a.Jc(" ",t.username," ")}}function x(t,e){1&t&&(a.Ub(0,"mat-header-cell"),a.Hc(1,"Roles"),a.Tb())}function w(t,e){if(1&t&&(a.Ub(0,"mat-cell"),a.Hc(1),a.Tb()),2&t){const t=e.$implicit;a.Bb(1),a.Jc(" ",t.roles," ")}}function _(t,e){1&t&&(a.Ub(0,"mat-header-cell"),a.Hc(1,"Edit Roles"),a.Tb())}function R(t,e){if(1&t){const t=a.Vb();a.Ub(0,"mat-cell"),a.Ub(1,"button",10),a.cc("click",(function(){a.xc(t);const n=e.$implicit;return a.gc().editRoles(n)})),a.Ub(2,"mat-icon"),a.Hc(3,"edit"),a.Tb(),a.Tb(),a.Tb()}}function y(t,e){1&t&&a.Pb(0,"mat-header-row")}function T(t,e){1&t&&a.Pb(0,"mat-row")}const L=function(){return["username","roles","edit"]};let A=(()=>{class t{constructor(t,e){this.dialog=t,this.adminService=e}ngOnInit(){this.getUsersWithRoles()}getUsersWithRoles(){this.adminService.getUsersWithRoles().subscribe(t=>{this.users=t,this.dataSource=new v.k(this.users),this.dataSource.sort=this.sort})}editRoles(t){this.dialog.open(C.a,{height:"260px",width:"300px",data:{user:t}}).afterClosed().subscribe(e=>{e&&e.length>0&&this.adminService.updateUserRoles(t.username,e).subscribe(()=>{t.roles=[...e],this.dataSource=new v.k(this.users),this.dataSource.sort=this.sort})})}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(O.b),a.Ob(l))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-user-management"]],viewQuery:function(t,e){var n;1&t&&a.Lc(P.a,!0),2&t&&a.tc(n=a.dc())&&(e.sort=n.first)},decls:12,vars:5,consts:[["matSort","",3,"dataSource"],["matColumnDef","username"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","roles"],[4,"matHeaderCellDef"],["matColumnDef","edit"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],["mat-mini-fab","","color","accent",2,"margin","12px",3,"click"]],template:function(t,e){1&t&&(a.Ub(0,"mat-table",0),a.Sb(1,1),a.Gc(2,U,2,0,"mat-header-cell",2),a.Gc(3,M,2,1,"mat-cell",3),a.Rb(),a.Sb(4,4),a.Gc(5,x,2,0,"mat-header-cell",5),a.Gc(6,w,2,1,"mat-cell",3),a.Rb(),a.Sb(7,6),a.Gc(8,_,2,0,"mat-header-cell",5),a.Gc(9,R,4,0,"mat-cell",3),a.Rb(),a.Gc(10,y,1,0,"mat-header-row",7),a.Gc(11,T,1,0,"mat-row",8),a.Tb()),2&t&&(a.mc("dataSource",e.dataSource),a.Bb(10),a.mc("matHeaderRowDef",a.pc(3,L)),a.Bb(1),a.mc("matRowDefColumns",a.pc(4,L)))},directives:[v.j,P.a,v.c,v.e,v.b,v.g,v.i,v.d,P.b,v.a,u.a,d.a,v.f,v.h],styles:[""]}),t})();function G(t,e){1&t&&(a.Ub(0,"mat-tab",5),a.Pb(1,"app-user-management"),a.Tb())}const H=function(){return["Admin"]};function S(t,e){1&t&&(a.Ub(0,"div",1),a.Ub(1,"h2",2),a.Hc(2,"Admin Panel"),a.Tb(),a.Ub(3,"mat-card"),a.Ub(4,"mat-tab-group"),a.Gc(5,G,2,0,"mat-tab",3),a.Ub(6,"mat-tab",4),a.Pb(7,"app-photo-management"),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&t&&(a.Bb(5),a.mc("appHasRole",a.pc(1,H)))}const k=function(){return["Admin","Moderator"]},D=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Ib({type:t,selectors:[["app-admin-panel"]],decls:1,vars:2,consts:[["fxLayout","column","fxLayoutGap","15px","class","admin-panel",4,"appHasRole"],["fxLayout","column","fxLayoutGap","15px",1,"admin-panel"],[1,"title"],["label","User Management",4,"appHasRole"],["label","Photo Management"],["label","User Management"]],template:function(t,e){1&t&&a.Gc(0,S,8,2,"div",0),2&t&&a.mc("appHasRole",a.pc(1,k))},directives:[c.a,r.c,r.d,i.a,s.b,s.a,f,A],styles:[".admin-panel[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .admin-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .admin-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .admin-panel[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .admin-panel[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .admin-panel[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%], .admin-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]}),t})()}];let F=(()=>{class t{}return t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({factory:function(e){return new(e||t)},imports:[[o.f.forChild(D)],o.f]}),t})();var $=n("PCNd");let j=(()=>{class t{}return t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({factory:function(e){return new(e||t)},imports:[[F,$.a]]}),t})()}}]);